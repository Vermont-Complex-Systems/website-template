/* =============================================================================
   DARK MODE (system preference or toggle)
   ============================================================================= */

:root.dark {
  --color-bg: #1a1a1a;
  --color-fg: #e8e8e8;
  --color-primary: #ffffff;
  --color-link: #8ab4f8;
  --color-border: rgba(255, 255, 255, 0.15);

  /* Invert gray scale for dark mode */
  --color-gray-25: rgb(30, 30, 30);
  --color-gray-50: rgb(35, 35, 35);
  --color-gray-100: rgb(45, 45, 45);
  --color-gray-200: rgb(55, 55, 55);
  --color-gray-300: rgb(75, 75, 75);
  --color-gray-400: rgb(100, 100, 100);
  --color-gray-500: rgb(135, 135, 135);
  --color-gray-600: rgb(160, 160, 160);
  --color-gray-700: rgb(180, 180, 180);
  --color-gray-800: rgb(200, 200, 200);
  --color-gray-900: rgb(225, 225, 225);

  /* Chart colors (dark mode) */
  --chart-grid: #444;
  --chart-bar: #888;
  --chart-axis: #ccc;
  --chart-text: #ccc;
}

/* Dark mode link styling */
:root.dark a {
  color: var(--color-link);
}

:root.dark a:hover {
  color: #aecbfa;
}

/* =============================================================================
   THEME DARK (for stories with dark backgrounds)
   Usage: Add class="theme-dark" to your story container
   Set custom colors with CSS variables:
     style="--theme-bg: #353839; --theme-footer: #414A4C;"
   ============================================================================= */

body:has(.theme-dark) {
  --color-bg: var(--theme-bg, #353839);
  --color-fg: white;
  --color-primary: white;
  --color-link: white;
  --color-border: rgba(255, 255, 255, 0.2);
  --color-gray-700: rgba(255, 255, 255, 0.8);
  --color-gray-900: white;
  --color-tertiary-gray: rgba(255, 255, 255, 0.7);
}

body:has(.theme-dark) .header {
  background: var(--theme-bg, #353839);
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

body:has(.theme-dark) .header .site-title,
body:has(.theme-dark) .header .about-button,
body:has(.theme-dark) .header .icon-button {
  color: white;
}

body:has(.theme-dark) .header.scrolled {
  background: var(--theme-bg, #353839);
  border-bottom-color: rgba(255, 255, 255, 0.2);
}

body:has(.theme-dark) footer.footer {
  background-color: var(--theme-footer, #414A4C);
}

body:has(.theme-dark) footer * {
  color: white;
}

/* Chart containers in dark theme */
body:has(.theme-dark) .chart-container {
  background: var(--theme-bg, #353839);
}

body:has(.theme-dark) .chart-container text {
  fill: white;
}

/* Only target grid lines (stroke="#e0e0e0"), not all lines */
body:has(.theme-dark) .chart-container line[stroke="#e0e0e0"] {
  stroke: rgba(255, 255, 255, 0.2);
}

body:has(.theme-dark) .chart-container line[stroke="#333"] {
  stroke: rgba(255, 255, 255, 0.5);
}

body:has(.theme-dark) .chart-container text[fill="#ccc"] {
  fill: rgba(255, 255, 255, 0.3);
}

/* =============================================================================
   THEME LIGHT (for stories that stay light regardless of global dark mode)
   Usage: Add class="theme-light" to your story container
   ============================================================================= */

.theme-light {
  --color-bg: var(--color-beige);
  --color-fg: var(--color-gray-800);
  --color-primary: var(--color-black);
  --color-link: var(--color-black);
  --color-border: var(--color-gray-300);

  /* Reset grays to light mode values */
  --color-gray-25: rgb(250, 250, 250);
  --color-gray-50: rgb(245, 245, 245);
  --color-gray-100: rgb(238, 238, 238);
  --color-gray-200: rgb(224, 224, 224);
  --color-gray-300: rgb(189, 189, 189);
  --color-gray-400: rgb(158, 158, 158);
  --color-gray-500: rgb(117, 117, 117);
  --color-gray-600: rgb(97, 97, 97);
  --color-gray-700: rgb(66, 66, 66);
  --color-gray-800: rgb(33, 33, 33);
  --color-gray-900: rgb(17, 17, 17);

  /* Chart colors (light mode) */
  --chart-grid: #e0e0e0;
  --chart-bar: #a6a6a6;
  --chart-axis: #333;
  --chart-text: #333;

  background: var(--color-bg);
  color: var(--color-fg);
}

.theme-light a {
  color: var(--color-link);
}

.theme-light .chart-container text {
  fill: #333;
}

.theme-light .chart-container line {
  stroke: #e0e0e0;
}
